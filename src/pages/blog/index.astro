---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const featuredPost = posts[0];
const recentPosts = posts.slice(1);

const title = 'Free AI 3D Packaging Design Tool & Resources | Packaging Fast Blog';
const description = 'Expert guides, tutorials, and resources about AI-powered packaging design, 3D mockup generation, and China manufacturing. Learn how to create production-ready cosmetic packaging.';
---

<Layout title={title} description={description}>
  <header>
    <nav itemscope itemtype="https://schema.org/SiteNavigationElement">
      <a href="/" class="logo" itemprop="url">
        <svg class="logo-icon" viewBox="0 0 44 44" fill="none">
          <rect width="44" height="44" rx="10" fill="#5747F4"/>
          <path d="M10 14 L22 14 L22 17 L10 17 Z" fill="white"/>
          <path d="M10 22 L30 22 L30 25 L10 25 Z" fill="white" opacity="0.9"/>
          <path d="M10 30 L26 30 L26 33 L10 33 Z" fill="white" opacity="0.8"/>
          <path d="M36 10 L44 10 L44 36 L36 36 Z" fill="white" opacity="0.7"/>
          <path d="M24 8 L28 8" stroke="white" stroke-width="2.5" stroke-linecap="round">
            <animate attributeName="opacity" values="1;0.4;1" dur="0.8s" repeatCount="indefinite"/>
          </path>
          <path d="M24 11.5 L27 11.5" stroke="white" stroke-width="2.5" stroke-linecap="round">
            <animate attributeName="opacity" values="0.4;1;0.4" dur="0.8s" repeatCount="indefinite"/>
          </path>
        </svg>
        <span class="logo-text">Packaging<span>Fast</span></span>
      </a>
      <a href="/#demo" class="nav-cta">Book a Demo</a>
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="hero-bg">
        <div class="hero-circle c1"></div>
        <div class="hero-circle c2"></div>
        <div class="hero-circle c3"></div>
      </div>
      <div class="hero-content">
        <h1 itemprop="headline"><span>Packaging</span> Insights</h1>
        <p itemprop="description">Expert guides, industry trends, and design tips for modern beauty brands.</p>
      </div>
    </section>

    {featuredPost && (
      <section class="featured">
        <a href={`/blog/${featuredPost.slug}`} class="featured-card">
          <div class="featured-image">
            <div class="featured-badge">Featured</div>
            <svg viewBox="0 0 400 300" class="featured-illustration">
              <rect width="400" height="300" fill="#f0f4ff" rx="16"/>
              <rect x="150" y="80" width="100" height="140" rx="8" fill="#5747F4" opacity="0.2"/>
              <rect x="165" y="95" width="70" height="110" rx="4" fill="#5747F4"/>
              <circle cx="200" cy="70" r="20" fill="#5747F4" opacity="0.3"/>
              <rect x="140" y="220" width="120" height="8" rx="4" fill="#ddd"/>
              <rect x="160" y="235" width="80" height="6" rx="3" fill="#eee"/>
              <circle cx="280" cy="100" r="40" fill="#f4a261" opacity="0.2"/>
              <circle cx="300" cy="120" r="25" fill="#e07a5f" opacity="0.2"/>
              <circle cx="320" cy="90" r="15" fill="#00b894" opacity="0.2"/>
            </svg>
          </div>
          <div class="featured-content">
            <div class="featured-meta">
              <time datetime={featuredPost.data.pubDate.toISOString()}>
                {featuredPost.data.pubDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}
              </time>
              <span class="read-time">8 min read</span>
            </div>
            <h2 itemprop="headline">{featuredPost.data.title}</h2>
            <p itemprop="description">{featuredPost.data.description}</p>
            <div class="featured-footer">
              <div class="author">
                <div class="author-avatar">{featuredPost.data.author.split(' ').map(n => n[0]).join('')}</div>
                <span>{featuredPost.data.author}</span>
              </div>
              <span class="read-more">Read Article →</span>
            </div>
          </div>
        </a>
      </section>
    )}

    <section class="posts-section" aria-label="Recent articles">
      <div class="section-header">
        <h2>Latest Articles</h2>
        <div class="filter-tags">
          <button class="filter-tag active">All</button>
          <button class="filter-tag">Design</button>
          <button class="filter-tag">Tutorial</button>
          <button class="filter-tag">Trends</button>
        </div>
      </div>

      <div class="posts-grid">
        {recentPosts.map((post, index) => (
          <article class="post-card" itemscope itemtype="https://schema.org/Article">
            <a href={`/blog/${post.slug}`} itemprop="url">
              <div class="post-image">
                <svg viewBox="0 0 400 220" class="post-illustration">
                  <rect width="400" height="220" fill="#f8f9fa" rx="12"/>
                  <rect x="50" y="40" width="300" height="140" rx="8" fill="#e8ecff"/>
                  <circle cx="100" cy="70" r="25" fill="#5747F4" opacity="0.15"/>
                  <rect x="60" y="110" width="80" height="8" rx="4" fill="#ddd"/>
                  <rect x="60" y="125" width="120" height="6" rx="3" fill="#eee"/>
                  <rect x="60" y="140" width="100" height="6" rx="3" fill="#eee"/>
                  <circle cx="300" cy="60" r="30" fill="#f4a261" opacity="0.15"/>
                  <circle cx="320" cy="80" r="20" fill="#e07a5f" opacity="0.15"/>
                </svg>
              </div>
              <div class="post-content">
                <div class="post-meta">
                  <time datetime={post.data.pubDate.toISOString()}>
                    {post.data.pubDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}
                  </time>
                  <div class="tags" itemprop="keywords">
                    {post.data.tags.slice(0, 2).map(tag => (
                      <span class="tag">{tag}</span>
                    ))}
                  </div>
                </div>
                <h3 itemprop="headline">{post.data.title}</h3>
                <p itemprop="description">{post.data.description}</p>
                <div class="post-footer">
                  <span class="author" itemprop="author">{post.data.author}</span>
                  <span class="arrow">→</span>
                </div>
              </div>
            </a>
          </article>
        ))}
      </div>

      {posts.length === 0 && (
        <div class="no-posts">
          <svg viewBox="0 0 200 200" class="empty-icon">
            <rect width="200" height="200" fill="#f8f9fa" rx="20"/>
            <path d="M60 80 L140 80 M60 100 L140 100 M60 120 L100 120" stroke="#ddd" stroke-width="4" stroke-linecap="round"/>
            <circle cx="140" cy="140" r="30" fill="#e8ecff"/>
            <path d="M130 140 L137 147 L153 131" stroke="#5747F4" stroke-width="3" fill="none" stroke-linecap="round"/>
          </svg>
          <h3>No articles yet</h3>
          <p>Check back soon for new content!</p>
        </div>
      )}
    </section>
  </main>

  <footer>
    <div class="footer-simple">
      <a href="/" class="footer-logo">Packaging<span>Fast</span></a>
      <p>© 2025 Packaging Fast. All rights reserved.</p>
    </div>
  </footer>
</Layout>

<style>
  :root {
    --primary: #1a1a1a;
    --accent: #5747F4;
    --accent-light: #e8ecff;
    --bg: #fafafa;
    --white: #fff;
    --gray-100: #f5f5f5;
    --gray-200: #eee;
    --gray-300: #ddd;
    --gray-400: #ccc;
    --gray-500: #888;
    --gray-600: #666;
  }

  header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(8px);
    z-index: 100;
    border-bottom: 1px solid var(--gray-200);
  }
  nav {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .logo { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 20px; color: var(--primary); text-decoration: none; }
  .logo-icon { width: 36px; height: 36px; }
  .logo-icon-small { width: 32px; height: 32px; }
  .logo-text { color: var(--primary); }
  .logo-text span { color: var(--accent); }
  .nav-links { display: flex; gap: 24px; }
  .nav-links a { font-size: 14px; color: var(--gray-500); font-weight: 500; }
  .nav-links a:hover, .nav-links a.active { color: var(--primary); }
  .nav-cta { background: var(--accent); color: white; padding: 10px 20px; border-radius: 8px; font-size: 14px; font-weight: 600; transition: all 0.2s; }
  .nav-cta:hover { background: var(--accent); color: white; transform: translateY(-2px); }

  main { padding-top: 64px; }

  .hero {
    position: relative;
    padding: 80px 24px 60px;
    background: linear-gradient(180deg, var(--white) 0%, var(--bg) 100%);
    overflow: hidden;
  }
  .hero-bg { position: absolute; inset: 0; overflow: hidden; pointer-events: none; }
  .hero-circle {
    position: absolute;
    border-radius: 50%;
    opacity: 0.5;
  }
  .hero-circle.c1 { width: 400px; height: 400px; background: var(--accent-light); top: -100px; right: -100px; }
  .hero-circle.c2 { width: 300px; height: 300px; background: #fff0e6; bottom: -50px; left: -50px; }
  .hero-circle.c3 { width: 200px; height: 200px; background: #e6fff0; top: 50%; left: 30%; }
  .hero-content {
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
    position: relative;
    z-index: 1;
  }
  .hero h1 { font-size: 48px; font-weight: 700; margin-bottom: 16px; letter-spacing: -1px; }
  .hero h1 span { color: var(--accent); }
  .hero > .hero-content > p { font-size: 18px; color: var(--gray-500); margin-bottom: 0; }

  .featured { max-width: 900px; margin: 0 auto; padding: 0 24px 60px; }
  .featured-card {
    display: grid;
    grid-template-columns: 1fr 1fr;
    background: var(--white);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 40px rgba(87, 71, 244, 0.1);
    text-decoration: none;
    transition: all 0.3s;
  }
  .featured-card:hover { transform: translateY(-4px); box-shadow: 0 20px 60px rgba(87, 71, 244, 0.15); }
  .featured-image { position: relative; background: var(--accent-light); min-height: 300px; display: flex; align-items: center; justify-content: center; }
  .featured-illustration { width: 100%; height: 100%; }
  .featured-badge {
    position: absolute;
    top: 16px;
    left: 16px;
    background: var(--accent);
    color: white;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
  }
  .featured-content { padding: 32px; display: flex; flex-direction: column; justify-content: center; }
  .featured-meta { display: flex; gap: 16px; font-size: 13px; color: var(--gray-500); margin-bottom: 16px; }
  .read-time { color: var(--accent); font-weight: 500; }
  .featured-content h2 { font-size: 24px; font-weight: 700; margin-bottom: 12px; color: var(--primary); line-height: 1.3; }
  .featured-content > p { font-size: 15px; color: var(--gray-500); margin-bottom: 24px; line-height: 1.6; }
  .featured-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; }
  .author { display: flex; align-items: center; gap: 10px; font-size: 14px; font-weight: 500; }
  .author-avatar { width: 32px; height: 32px; background: var(--accent); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; }
  .read-more { color: var(--accent); font-weight: 600; font-size: 14px; }

  .posts-section { max-width: 1100px; margin: 0 auto; padding: 40px 24px 80px; }
  .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; flex-wrap: wrap; gap: 20px; }
  .section-header h2 { font-size: 28px; font-weight: 700; }
  .filter-tags { display: flex; gap: 8px; }
  .filter-tag {
    background: var(--white);
    border: 1px solid var(--gray-200);
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
  }
  .filter-tag:hover, .filter-tag.active { background: var(--accent); border-color: var(--accent); color: white; }

  .posts-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }

  .post-card {
    background: var(--white);
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s;
    border: 1px solid var(--gray-200);
  }
  .post-card:hover { transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,0.08); }
  .post-card a { display: block; text-decoration: none; }
  .post-image { aspect-ratio: 400/220; overflow: hidden; background: var(--gray-100); }
  .post-illustration { width: 100%; height: 100%; transition: transform 0.3s; }
  .post-card:hover .post-illustration { transform: scale(1.05); }
  .post-content { padding: 20px; }
  .post-meta { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; font-size: 13px; color: var(--gray-500); }
  .tags { display: flex; gap: 6px; }
  .tag { background: var(--accent-light); color: var(--accent); padding: 3px 10px; border-radius: 12px; font-size: 11px; font-weight: 500; }
  .post-content h3 { font-size: 17px; font-weight: 600; margin-bottom: 8px; color: var(--primary); line-height: 1.4; }
  .post-content > p { font-size: 14px; color: var(--gray-500); margin-bottom: 16px; line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  .post-footer { display: flex; justify-content: space-between; align-items: center; font-size: 13px; color: var(--gray-500); }
  .post-footer .arrow { color: var(--accent); transition: transform 0.2s; }
  .post-card:hover .post-footer .arrow { transform: translateX(4px); }

  .no-posts { text-align: center; padding: 80px 24px; }
  .empty-icon { width: 120px; height: 120px; margin-bottom: 24px; }
  .no-posts h3 { font-size: 20px; margin-bottom: 8px; }
  .no-posts p { color: var(--gray-500); }

  footer { background: var(--white); padding: 40px 24px; border-top: 1px solid var(--gray-200); text-align: center; }
  .footer-simple { max-width: 800px; margin: 0 auto; }
  .footer-logo { font-weight: 700; font-size: 18px; color: var(--primary); text-decoration: none; }
  .footer-logo span { color: var(--accent); }
  .footer-simple > p { font-size: 13px; color: var(--gray-500); margin-top: 12px; }

  @media (max-width: 1024px) {
    .featured-card { grid-template-columns: 1fr; }
    .featured-image { min-height: 250px; }
    .posts-grid { grid-template-columns: 1fr; }
  }

  @media (max-width: 768px) {
    .nav-links { display: none; }
    .hero h1 { font-size: 36px; }
    .hero-stats { gap: 24px; }
    .stat-num { font-size: 24px; }
    .section-header { flex-direction: column; align-items: flex-start; }
    .filter-tags { overflow-x: auto; width: 100%; }
  }
</style>
